(function(f,g){f.g3_Galleria={};var c=<?= $items ?>,e="<?= $code ?>",a=[],b=h=0,d=false,i;f.g3_slideshow={show:function(l){var j=0,k={azur:40,classic:50,twelve:29,miniml:30,fullscreen:0,folio:0};a=[];g(c).each(function(n){var m=parseInt(this.resize_width||this.width);var p=parseInt(this.resize_height||this.height);if(Math.floor(m*p)>j){j=Math.floor(m*p);b=m;h=p+k.<?= $ss_theme ?>}if(parseInt(this.id)==l){l=n}switch(this.type){case"photo":var o=this;a.push({resize_width:this.resize_width,resize_height:this.resize_height,width:this.width,height:this.height,image:this.resize_url_public,thumb:this.thumb_url_public,big:this.file_url_public,title:this.title,description:this.description,link:this.web_url,maxWidth:function(){return f.innerWidth>o.resize_width?o.resize_width:f.innerWidth},maxHeight:function(){return f.innerWidth>o.resize_width?o.resize_width*(o.height/o.width)+k.<?= $ss_theme ?>:f.innerWidth*(o.height/o.width)+k.<?= $ss_theme ?>}});break;case"movie":var o=this;a.push({width:this.width,height:this.height,thumb:this.thumb_url_public,iframe:this.iframe_url_public,title:this.title,description:this.description,link:this.web_url,maxWidth:function(){return f.innerWidth>o.width?o.width:f.innerWidth},maxHeight:function(){return f.innerWidth>o.width?o.width*(o.height/o.width)+k.<?= $ss_theme ?>:f.innerWidth*(o.height/o.width)+k.<?= $ss_theme ?>}});break}if(n==c.length-1){g("html").append('<div id="modal" style="background-color: rgba(0,0,0,.6);width:100%;min-width:100%;height:100%;min-height:100%;position:absolute;margin:auto;top:0;right:0;bottom:0;left:0;z-index:999;" /><div id="galleria" style="height: 100%; max-height:'+h+"px;width:100%;max-width:"+b+'px;position:absolute;margin:auto;top:0;right:0;bottom:0;left:0;z-index:1000;"/>');g3_slideshow.play(l)}})},play:function(j){g("#galleria").galleria({data_source:a,_showPopout:false,autoplay:true,easing:"swing",show:j});f.g3_Galleria=g("#galleria").data("galleria");f.g3_Galleria.bind("loadstart",function(k){i=k.galleriaData;g3_slideshow.reform(i,f.g3_Galleria)}).bind("fullscreen_enter",function(k){d=true}).bind("fullscreen_exit",function(k){d=false;g3_slideshow.reform(i,f.g3_Galleria)});if("<?= $ss_theme ?>"=="classic"){g(".galleria-container").append('<div class="galleria-info-link galleria-fullscreen" style="display:block;z-index:999;top: 15px;right: 15px;background: #000000 url(/gallery3/modules/slideshow/vendor/themes/classic/fullscreen.png) no-repeat 3.5px 3.5px;width:20px;height:20px;"></div>')}g(document).on("click",".galleria-fullscreen",function(k){d=!d;if(d){g("#galleria").css({"max-width":"100%","max-height":"100%"})}if("<?= $ss_theme ?>"=="classic"){f.g3_Galleria.toggleFullscreen()}});g(document).on("click","#modal",function(k){g("#galleria, #modal").remove()})},reform:function(m,l){if(!d){var j=m.maxWidth(),k=m.maxHeight();l.resize({width:j,height:k});g("#galleria").css({"max-width":j+"px","max-height":k+"px"})}}}}(window,window.jQuery));